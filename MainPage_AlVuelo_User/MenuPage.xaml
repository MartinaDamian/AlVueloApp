<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             x:Class="AlVueloMobile.Views.MenuPage"
             Title="{Binding NombreRestaurante}">
    <VerticalStackLayout Padding="16" Spacing="12">

        <Label Text="CategorÃ­as" FontSize="18"/>

        <ScrollView Orientation="Horizontal">
            <HorizontalStackLayout Spacing="8">
                <CollectionView ItemsSource="{Binding ListaCategorias}"
                                ItemsLayout="HorizontalList"
                                SelectionMode="None">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Button Text="{Binding .}"
                                    Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=BindingContext.SelectCategoryCommand}"
                                    CommandParameter="{Binding .}"/>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </HorizontalStackLayout>
        </ScrollView>

        <Label Text="{Binding CategoriaActual, StringFormat='Platos - {0}'}" FontSize="18"/>

        <CollectionView ItemsSource="{Binding Platos}" SelectionMode="None">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Padding="12" Margin="0,6" CornerRadius="14">
                        <VerticalStackLayout Spacing="6">
                            <Label Text="{Binding nombre}" FontSize="18"/>
                            <Label Text="{Binding precio, StringFormat='Precio: {0:C}'}"/>
                            <Label Text="{Binding ingredientes}" FontSize="12" LineBreakMode="TailTruncation"/>
                            <Button Text="Ver detalle"
                                    Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=BindingContext.OpenDishCommand}"
                                    CommandParameter="{Binding}"/>
                        </VerticalStackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

    </VerticalStackLayout>
</ContentPage>
